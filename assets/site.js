// Generated by CoffeeScript 1.3.3
(function() {
  var createRiders, initializer, updateDisplay, updateTemp;

  createRiders = function(temp) {
    var i, riders, _i, _results;
    riders = Math.round(temp * .2) + 1;
    if (temp < 0) {
      riders = 1;
    }
    i = '<div class="rider"><img src="assets/images/rider-left.png"></div>';
    _results = [];
    for (_i = 1; 1 <= riders ? _i <= riders : _i >= riders; 1 <= riders ? _i++ : _i--) {
      _results.push($('.riders').append(i));
    }
    return _results;
  };

  updateTemp = function(temp) {
    if (temp > 32) {
      $('body').removeClass('freezing');
    } else {
      $('body').addClass('freezing');
    }
    if ($('#actual_temp').hasClass('celsius')) {
      temp = Math.round((temp - 32) / 1.8000);
    }
    return $('#actual_temp .temp').text(temp);
  };

  updateDisplay = function(temp) {
    createRiders(temp);
    return setTimeout((function() {
      return $('.background').removeClass('transitioning');
    }), 300);
  };

  initializer = function() {
    var initial_temp;
    initial_temp = 60;
    $('#temp_input').slider({
      orientation: 'vertical',
      selection: "after",
      value: initial_temp,
      min: -20,
      max: 110,
      reversed: true,
      tooltip: 'hide',
      formater: function(e) {
        return updateTemp(e);
      }
    }).on('slideStart', function() {
      return $('.background').addClass('moving');
    }).on('slideStop', function(e) {
      $('.riders').empty();
      $('.background').addClass('transitioning').removeClass('moving');
      return updateDisplay(e.value);
    });
    return createRiders(initial_temp);
  };

  $(document).ready(function() {
    initializer();
    $('.light').css('height', $('.light').css('width'));
    return $('#actual_temp').click(function(e) {
      e.preventDefault();
      $('#actual_temp').toggleClass('celsius');
      return updateTemp($('#temp_input').slider('getValue'));
    });
  });

}).call(this);
